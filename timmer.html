<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>时钟</title>
    <style>
        #outputContainer{
            font-family: 微软雅黑;
            color: #A66800;
            font-size: 20px;
        }
        #countDown{
            font-family: 微软雅黑;
            color: #A66800;
            font-size: 20px;
        }
    </style>
</head>
<body>
<div id="outputContainer"></div>
<div id="countDown"></div>

<script>

    function Timer() {
        var self = this;
        self.now = new Date();
        self.year = self.now.getFullYear();
        self.month = self.now.getMonth()+1;
        self.date = self.now.getDate();
        self.hours = self.now.getHours();
        self.minute = self.now.getMinutes();
        self.second = self.now.getSeconds();
        self.miniSecond = self.now.getMilliseconds();
        self.output = function (selector) {
            var o =document.querySelector(selector);
            o.innerText = self.year + "-"
            +self.month + "-"
            +self.date + " "
            +self.hours + ":"
            +self.minute + ":"
            +self.second + ":"
            +self.miniSecond;
        }
    }
    function Countdown(dateStr,selector) {
        var ele = document.querySelector(selector);
        var now = new Date();
        var des = new Date(dateStr);
        var subDate = des-now;
        var dates = subDate/1000/60/60/24;
        var date2 = Math.floor(dates);
        var dateMiniSecond = date2*24*60*60*1000;
        var hourMiniSecond = subDate - dateMiniSecond;
        var hours = hourMiniSecond/1000/60/60;
        var hours2 = Math.floor(hours);
        var hMiniSecond = hours2*60*60*1000;
        var mMiniSecond = hourMiniSecond-hMiniSecond;
        var minute = mMiniSecond/1000/60;
        var minute2 = Math.floor(minute);
        var mrMiniSecond = minute2*60*1000;
        var secondMini = mMiniSecond - mrMiniSecond;
        var second = secondMini/1000;
        var second2 = Math.floor(second);
        var secondMiniSe = second2 *1000;
        var miniSecond2 = secondMini - secondMiniSe;
        ele.innerText = "距离春节还有："+date2+"天"
                +hours2+"时"
                +minute2+"分"
                +second2+"秒"
                +miniSecond2+"毫秒";


    }
    setInterval(function () {
        Countdown("2017-1-28","#countDown");
    },1);
    setInterval(function () {
        var timer = new Timer();
        timer.output("#outputContainer");
    },1);
</script>
</body>
</html>